<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <!-- Sidebar -->
  <div class="flex">
    <div class="w-64 bg-gray-800 text-white h-screen p-4">
      <h2 class="text-2xl font-semibold mb-6">Admin Dashboard</h2>
      <ul class="space-y-4">

        <li><a href="/admin/contests" class="block px-4 py-2 rounded hover:bg-gray-700">Contest Management</a></li>
        <li><a href="/admin/problems" class="block px-4 py-2 rounded hover:bg-gray-700">Problem Management</a></li>
        <li><a href="/setproblem" class="block px-4 py-2 rounded hover:bg-gray-700">Add Problem</a></li>
        <li><a href="/admin_login/" class="block px-4 py-2 rounded hover:bg-gray-700">Log Out</a></li>
      </ul>
    </div>

     <!-- Main Section -->
  <main class="container mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold mb-6">Registered Users</h2>
    <!-- User List Table -->
    <div class="bg-white rounded shadow-md overflow-hidden">
      <table class="table-auto w-full border-collapse border border-gray-200">
        <thead class="bg-gray-200 text-gray-700">
          <tr>
            <th class="py-2 px-4 border-b border-gray-300 text-left">ID</th>
            <th class="py-2 px-4 border-b border-gray-300 text-left">Name</th>
            <th class="py-2 px-4 border-b border-gray-300 text-left">Email</th>
            <th class="py-2 px-4 border-b border-gray-300 text-left">Actions</th>
          </tr>
        </thead>
        <tbody>
  <% if (users.length > 0) { %>
    <% users.forEach(user => { %>
      <tr class="hover:bg-gray-100">
        <!-- Displaying the user's ID -->
        <td class="py-2 px-4 border-b border-gray-200"><%= user.id %></td>

        <!-- Editable name field -->
        <td class="py-2 px-4 border-b border-gray-200">
          <form action="/admin/update-user/<%= user.id %>" method="POST">
            <input 
              type="text" 
              name="name" 
              value="<%= user.Name %>" 
              class="border border-gray-300 rounded px-2 py-1 w-full" 
              required />
        </td>

        <!-- Editable email field -->
        <td class="py-2 px-4 border-b border-gray-200">
            <input 
              type="email" 
              name="email" 
              value="<%= user.Email %>" 
              class="border border-gray-300 rounded px-2 py-1 w-full" 
              required />
        </td>

        <!-- Action buttons for updating and deleting -->
        <td class="py-2 px-4 border-b border-gray-200 flex space-x-2">
          <button 
            type="submit" 
            class="bg-green-500 text-white px-4 py-1 rounded hover:bg-green-600">
            Update
          </button>
          </form>

          <form action="/admin/delete-user/<%= user.id %>" method="POST">
            <button 
              type="submit" 
              class="bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600">
              Delete
            </button>
          </form>
        </td>
      </tr>
    <% }); %>
  <% } else { %>
    <!-- Message when no users are found -->
    <tr>
      <td colspan="4" class="py-4 text-center text-gray-500">No users found.</td>
    </tr>
  <% } %>
</tbody>

      </table>
    </div>
  </main>
</body>
</html>